# GOKIGEN MOOD ツール 業務詳細書

## システム概要
GOKIGEN MOODは、3枚の写真を組み合わせて壁掛け用のギャラリーを作成するWebアプリケーションです。ユーザーは写真をアップロードし、フィルターやトリミングで編集した後、高品質な印刷用画像としてダウンロードできます。

## 主要機能

### 1. 写真管理機能
**目的**: ユーザーが3枚の写真をアップロード・管理する

**詳細**:
- 3つのフレーム（A4版1枚、L版2枚）を提供
- ドラッグ&ドロップまたはクリックで写真選択
- サンプル写真ボタンでテスト用画像を一括読み込み
- 各写真に編集・削除ボタンを配置
- 写真の存在状態を視覚的に表示

**入力**: 画像ファイル（JPEG, PNG, WebP）
**出力**: プレビュー表示、編集可能状態

### 2. 写真編集機能
**目的**: アップロードした写真を美しく編集する

**詳細**:
- モーダル形式の編集画面
- 写真切り替えタブ（写真1, 2, 3）
- 左右矢印での順次切り替え
- 現在編集中の写真をハイライト表示

**フィルター機能**:
- デュオトーンフィルター（5種類）
- 濃度調整（0-100%、デフォルト65%）
- 色調調整（明度、コントラスト、彩度）
- モノトーン調整
- リアルタイムプレビュー

**トリミング機能**:
- ドラッグで位置調整
- ホイールで拡大縮小
- インタラクティブモード切り替え
- 位置・ズーム値の保存

**入力**: 写真ファイル、編集パラメータ
**出力**: 編集済み写真、プレビュー更新

### 3. プレビュー機能
**目的**: 編集結果をリアルタイムで確認する

**詳細**:
- 3つのフレームを壁掛け風に配置
- A4版は中央上部、L版は右側に縦横配置
- 編集内容の即座反映
- 写真の存在状態を色分け表示

**入力**: 編集済み写真データ
**出力**: 壁掛け風プレビュー

### 4. ダウンロード機能
**目的**: 編集済み写真を高品質でダウンロードする

**詳細**:
- DPI選択（72, 150, 300 DPI）
- デフォルト300 DPI（印刷推奨）
- 個別ダウンロード機能
- JPEG形式で出力
- ファイル名にタイムスタンプ付与
- DPI情報をJPEGヘッダーに埋め込み

**入力**: 編集済み写真、DPI設定
**出力**: 高品質JPEGファイル

## 技術仕様

### フロントエンド
- HTML5 Canvas API
- FileReader API
- ドラッグ&ドロップ API
- レスポンシブCSS

### 画像処理
- Canvas 2D Context
- Image オブジェクト
- Blob/File API
- JPEG JFIF ヘッダー操作

### ブラウザ対応
- Chrome（推奨）
- Safari
- Firefox
- Edge

## ユーザーインターフェース

### レイアウト
- ヘッダー: タイトル、DPI選択
- メインエリア: 写真フレーム、プレビュー
- 編集モーダル: 写真表示、コントロール
- ダウンロードセクション: 操作ボタン

### 色設計
- メインカラー: #F6A18F（オレンジ）
- アクセントカラー: #FFF5F2（薄いオレンジ）
- テキストカラー: #333
- ボーダーカラー: #ddd

### レスポンシブ対応
- モバイル: タッチ操作最適化
- タブレット: 中サイズ表示
- デスクトップ: フル機能表示

## エラーハンドリング

### ファイル関連
- 対応外形式の警告
- ファイルサイズ制限
- 読み込み失敗時の再試行

### 編集関連
- モーダル表示エラー
- フィルター適用失敗
- 保存処理エラー

### ダウンロード関連
- ブラウザ非対応警告
- メモリ不足対応
- ファイル生成失敗

## パフォーマンス要件

### 画像処理
- 最大ファイルサイズ: 10MB
- 推奨解像度: 3000x3000px以下
- 処理時間: 3秒以内

### レスポンス
- ページ読み込み: 2秒以内
- 編集反映: 1秒以内
- ダウンロード生成: 5秒以内
